## DATE: 2025-04-08

### 현재의 Offset Paging의 요청 & 응답 흐름

1. Controller

- 클라이언트의 GET 요청 쿼리 스트링을 기반으로 Spring이 Pageable 객체를 생성해 주입한다.
- 이 Pageable을 Service로 넘기고, 반환된 Page<DTO>를 Model에 담는다.
- 페이징 바 생성을 위해 startPage, endPage 등의 값도 계산하여 함께 View로 전달한다.

2. Service

- Pageable을 보정하거나 그대로 Repository로 전달한다.
- Repository에서 받은 Page<Entity>를 map()으로 DTO로 변환한다.
- 최종적으로 Page<DTO> 형태로 Controller에 반환한다.

3. Repository

- Spring Data JPA의 findAll(Pageable pageable)을 사용한다.
- 내부적으로 limit, offset, 정렬 조건이 자동 적용된 쿼리를 생성한다.
- 전체 데이터 개수를 위한 count 쿼리도 함께 실행되어 Page<Entity>를 반환한다.

---

Pageable vs Page<T>

- Pageable: (요청을 보내는 역할) 페이지 요청 정보(getPageNumber, getPageSize, getSort)만 포함 (페이지 번호, 페이지 크기 등)
- Page<T>: (응답을 받는 역할) 응답 결과(getContent, getTotalElements, getTotalPages) + 요청 정보의 요약본(getNumber, getSize) 포함