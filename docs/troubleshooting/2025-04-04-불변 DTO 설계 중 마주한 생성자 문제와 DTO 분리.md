📅 작성일: 2025.04.04
<br>
🔧 주제: DTO에 final 사용 시 일부 필드만 생성자 호출 불가
---

### 💡 상황

`BoardDTO`를 리팩토링 하면서, 불변성을 위해 모든 필드에 `final`을 선언하고 이미 정의된 생성자를 삭제함.
그러자 `BoardService` 클래스의 `paging` 메소드에 문제가 생김.

게시판 목록을 페이징 처리하는 과정에서 `BoardDTO`를 일부 필드만으로 간단히 생성하려 했으나,  
불변성을 위해 모든 필드에 `final`을 선언해서 부분적으로 필드를 받는 생성자 생성이 불가능해짐.
이에 BoardService 클래스에서 `.map()`을 통해 빠르게 DTO를 만들 수 없는 상황이 발생함.

---

### 🔍 원인 분석

필드를 `final`로 선언하면서, `BoardDTO` 객체를 생성할 때는 모든 필드에 데이터를 넣어야 한다.
하지만 `paging` 과정에서는 페이징에 필요한 필드만 있으면 되므로, 모든 필드의 정보를 받을 필요가 없고, 이에 코드 또한 필드를 부분적으로 받고 있다.
따라서 모든 필드를 받지 못해 오류가 생긴 것이다.

```java
Page<BoardDTO> boardDTOS = boardEntities.map(board -> new BoardDTO(board.getId(), board.getBoardWriter(), board.getBoardTitle(), board.getBoardHits(), board.getCreatedTime()));
return boardDTOS;
```

---

### ✅ 해결 방법

전체 데이터를 담는 `BoardDTO`는 기존 구조를 유지하되,  
페이징과 같이 일부 필드만 필요한 경우에는 `BoardSummaryDTO`라는 **경량 DTO를 새로 분리**해 생성자 방식으로 처리하였다.
→ `Page.map()`에서 `new BoardSummaryDTO(...)` 방식으로 간결하게 DTO 생성 가능.

```java
Page<BoardSummaryDTO> boardSummaryDTOS = boardEntities.map(board -> new BoardSummaryDTO(board.getId(), board.getBoardWriter(), board.getBoardTitle(), board.getBoardHits(), board.getCreatedTime()));
return boardSummaryDTOS;
```

---

### ✍️ 회고 및 배운 점

DTO는 하나로 통합하려 하기보다는,  
**용도에 따라 불변 DTO와 경량 DTO를 나눠서 설계**하는 것이 유지보수성과 가독성에 유리함.  
또한 `final + builder`는 객체 생성의 안정성과 유연성을 주지만,
**일부 필드만 필요한 경우엔 별도 구조를 설계해야 한다는 점**을 인지하게 됨.

---

### 📎 관련 링크 / 참고 자료 (선택)